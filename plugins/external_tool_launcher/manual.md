# 外部工具启动器 - 插件使用手册

## 1. 插件用途

本插件旨在打通 **PhonAcq Assistant** 与您电脑上安装的其他专业软件（如 Praat、Audacity、ELAN 等）之间的数据壁垒，实现“一键跳转”，让您的工作流更加顺畅。

它允许您自定义多个外部工具的启动方式，并将它们无缝集成到“音频数据管理器”的右键菜单中。

---

## 2. 界面与功能详解

### **外部工具集成中心**

当您从主插件菜单启动本插件时，会打开此设置窗口。

#### **左侧面板：已配置的工具**

*   **工具列表**: 显示您已经配置好的所有外部工具。
*   **添加/移除**:
    *   **添加新工具**: 创建一个新的空白工具配置项。
    *   **移除选中工具**: 删除当前在列表中选中的工具。

#### **右侧面板：工具编辑器**

这里是您配置单个工具具体行为的地方。

*   **启用此工具**: 勾选后，该工具才会出现在右键菜单中。
*   **工具名称**: 显示在右键菜单中的名称，例如“用 Praat 打开”、“用 Audacity 编辑”。
*   **程序路径**:
    *   您需要指定外部工具的可执行文件（`.exe` 或 `.app`）的完整路径。
    *   点击“浏览...”按钮可以方便地查找文件。
*   **支持的格式**:
    *   填写该工具支持的音频文件扩展名，用逗号分隔，例如 `.wav, .mp3, .flac`。
    *   只有当您在“音频数据管理器”中选中的文件格式与此处设置的匹配时，对应的右键菜单项才会出现。
*   **执行命令模板**: **核心配置项**。这里定义了如何调用您的外部程序。您需要使用特定的占位符来告诉插件如何传递文件路径。
    *   **可用占位符**:
        *   `{tool_path}`: 会被替换为上方设置的“程序路径”。
        *   `{filepaths_quoted}`: **（推荐）** 会被替换为所有选中文件的路径，每个路径都用双引号包裹，以正确处理包含空格的路径。
        *   `{filepath_quoted}`: **（推荐）** 会被替换为**第一个**选中文件的路径，并用双引号包裹。
        *   `{filepaths}` / `{filepath}`: 不带引号的版本，不推荐在现代操作系统中使用。
    *   **示例 (Praat 打开多个文件):**
        `"{tool_path}" --open {filepaths_quoted}`
    *   **示例 (用 Praat 运行脚本处理单个文件):**
        `"{tool_path}" --run "C:/scripts/my_script.praat" {filepath_quoted}`

---

## 3. 如何使用

1.  **启用插件**: 在“插件管理”中启用本插件。

2.  **首次配置 (以 Praat 为例)**:
    1.  从主程序的插件菜单中启动 **“外部工具启动器”**。
    2.  在弹出的“外部工具集成中心”窗口中，默认已有一个 Praat 的配置项。**您只需配置其路径**。
    3.  点击“程序路径”旁的“浏览...”按钮，找到并选择您电脑上的 `Praat.exe` (Windows) 或 `Praat.app` (macOS) 文件。
    4.  点击右下角的“保存当前工具”按钮。
    5.  点击“关闭”按钮。

3.  **开始使用**:
    1.  前往 `资源管理 -> 音频数据管理器` 模块。
    2.  在文件列表中，**右键单击**一个或多个音频文件。
    3.  在弹出的菜单中，将鼠标悬停在新增的 **“用外部工具打开”** 子菜单上。
    4.  在子菜单中，您会看到您刚刚配置的 **“用 Praat 打开”** 选项。
    5.  点击该选项，Praat 软件将会自动启动，并加载您所选中的所有音频文件。

## 4. 提示

- 您可以按照相同的步骤，添加任意多个外部工具，例如 Audacity、ELAN、FFmpeg 等，只需了解它们各自的命令行启动参数即可。
- 如果您移动了外部工具的安装位置，请记得回到本插件的设置中更新其路径。