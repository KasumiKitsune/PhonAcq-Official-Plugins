# 批量音频处理器 - 使用手册

## 1. 插件用途

本插件是一个强大的音频批处理工具，旨在帮助您快速、高效地将大量音频文件统一为标准格式，为后续的声学分析、数据归档或项目交付做准备。它能一次性对多个文件或整个文件夹内的音频执行相同的处理流程。

---

## 2. 界面与功能详解

### 左侧面板：处理选项

这里是您定义“要做什么”和“如何做”的地方。所有设置项都分组排列，便于理解。

#### **处理选项 (Processing Options)**

*   **裁切首尾静音**:
    *   **启用**: 勾选此项后，插件会自动检测并移除每个音频文件开头和结尾的无声部分。
    *   **静音判定阈值**: 通过滑块设置一个分贝值（dB）。低于此音量的部分将被视作静音。-40dB是一个常用的参考值。
    *   **首尾保留时长**: 在检测到的声音前后，额外保留一段指定时长（毫秒）的静音，以防止裁切过近，使声音听起来更自然。
    *   **结尾渐弱时长**: 在裁切后的音频末尾应用一个平滑的渐弱效果，避免声音突然中断。

*   **其他选项**:
    *   **重采样到**: 将所有音频的采样率统一转换为所选值（如44100Hz, 16000Hz等）。这对于需要统一输入格式的机器学习模型或声学分析软件非常重要。
    *   **转换为单声道**: 将所有立体声（双声道）音频混合为单声道。
    *   **音量标准化**: 将所有音频的平均响度（RMS）调整到一个统一的标准（-20dBFS）。这能有效消除因不同录音设备或环境导致的音量忽大忽小问题。

#### **输出设置 (Output Settings)**

*   **输出文件夹**:
    *   指定一个文件夹来存放所有处理后的文件。
    *   **如果此项留空**，处理后的文件将默认保存在其**原始文件所在的目录**中。

*   **文件名模板**:
    *   设置新文件的命名规则。您可以组合使用普通文本和占位符。
    *   **可用占位符**:
        *   `{original_name}`: 原始文件名（不含扩展名）。
        *   `{samplerate}` 或 `{sr}`: 处理后的采样率。
    *   **示例**: 如果模板为 `{original_name}_processed_{sr}Hz`，一个名为 `rec_01.wav` 的文件在重采样到16000Hz后，新文件名将是 `rec_01_processed_16000Hz.wav`。

*   **输出格式**:
    *   选择最终保存文件的格式。
    *   **.wav**: 无损格式，兼容性最好，是学术研究和数据存档的首选。
    *   **.mp3**: 有损压缩格式，文件体积小，适合网络传输。
    *   **.flac**: 无损压缩格式，音质与WAV相同，但文件体积更小。
    *   **.ogg**: 有损压缩格式，是一种开源替代方案。

*   **文件名冲突策略**:
    *   **覆盖 (Overwrite)**: 如果新文件名与现有文件重名，将直接覆盖掉旧文件（危险操作）。
    *   **跳过 (Skip)**: 如果重名，则不保存该文件，直接跳过。
    *   **重命名 (Rename)**: 如果重名，会自动在文件名后添加数字后缀（如 `_1`, `_2`）。

---

### 右侧面板：文件列表与执行

*   **待处理文件列表**:
    *   这里显示所有等待处理的音频文件。
    *   **波形预览**: 每个文件右侧都有一个迷你的波形图，让您对音频内容有一个直观的印象。
    *   **交互**:
        *   **右键单击**: 可进行“试听”、“在文件浏览器中显示”、“从列表中移除”等操作。
        *   **按 `Enter` 键**: 快速试听当前选中的文件。

*   **执行操作**:
    *   **1. 处理并生成预览**: 这是第一步。点击后，插件会根据您左侧的设置，对列表中的所有文件进行处理，并将结果保存在一个**临时文件夹**中。处理成功的文件，其状态图标会变为绿色，并且可以试听处理后的效果。
    *   **2. 保存所有已处理文件**: 这是最后一步。当您对预览结果满意后，点击此按钮，插件才会将所有临时文件，根据您的输出设置，正式保存到您指定的最终位置。
    *   **进度条**: 实时显示当前操作（处理或保存）的进度。

---

## 3. 完整操作流程

1.  **添加文件**:
    *   通过“添加文件”、“添加文件夹”按钮，或直接将文件/文件夹拖拽到右侧的“待处理文件”列表中。
    *   在列表中，可按 `Delete` 或 `Backspace` 键移除选中的文件。

2.  **配置处理选项**: 在左侧面板，根据您的需求，勾选并设置所有处理参数和输出规则。

3.  **生成预览**: 点击 **“1. 处理并生成预览”** 按钮。等待进度条走完。

4.  **检查结果**:
    *   检查列表中文件的状态图标。对于处理失败的文件，将鼠标悬停在其上可以查看错误信息。
    *   试听几个处理成功的文件，确认效果是否符合预期。

5.  **最终保存**: 确认无误后，点击 **“2. 保存所有已处理文件”** 按钮，完成整个批处理任务。

---

## 4. 集成使用

- **独立启动**: 从主程序右上角的插件菜单中直接启动本插件。
- **从数据管理器启动**: 在“音频数据管理器”中，选中一个或多个音频文件，右键单击并选择“批量处理选中的文件...”，本插件会自动启动，并载入您所选的文件。